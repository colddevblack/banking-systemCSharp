@model List<BancoExt.Models.TransacaoModel>

@{
    ViewBag.Title = "Index";
}

<p class="h1">Lista Transações</p>

<div class="wrapper wrapper-content animated fadeInRight">
    <div class="ibox float-e-margins">
        <div class="ibox-title">
            <h5>Lista com Jquery</h5>&ensp;
        </div>
        <div class="ibox-content">
            <div class="row">
                <div class="col-sm-3">
                    <label>Cliente</label>
                   @Html.DropDownList("cliente", null, "-- Selecione --", htmlAttributes: new { @class = "form-control form-control-sm" })
                </div>
                <div class="col-lg-3">
                    <label>Conta</label>
                   @Html.DropDownList("conta", null, "-- Selecione --", htmlAttributes: new { @class = "form-control form-control-sm" })
                </div>

                <div class="col-lg-4">
                    <label>Tipo Transacao</label>
                    @Html.DropDownList("tipotransacao", null, "-- Selecione --", htmlAttributes: new { @class = "form-control form-control-sm" })
                </div>

                <div class="col-lg-2">
                    <label>&ensp;</label>
                    <button id="btnBuscar" onclick="Busca();" class="btn btn-warning"><i class="fa fa-search"></i> Pesquisar</button>
                </div>
            </div>
        </div>
    </div>

    <div class="row">
        @* primeira busca partial *@
        <div class="col-lg-12">
            <div class="ibox ">
                <div class="ibox-title">
                    <h5>Lista Busca </h5>
                </div>
                <div class="ibox-content">
                    <div id="_Buscas">
                    </div>
                </div>

            </div>
        </div>
    </div>

</div>


@section Styles {
    @Styles.Render("~/Content/plugins/dataTables/dataTablesStyles")
}
@section Scripts {
    @Scripts.Render("~/plugins/dataTables")
    @* PRINCIPAL *@
    <script type="text/javascript">
        alert("ativo jquery");
        var Busca = function () {
            //div                    //action       //parametros busca                       //parametro campo action // nome dropdown selected
            $("#_Buscas").load('_Buscas?idconta=' + $("#conta option:selected").val() + '&idtipotransacao=' + $("#tipotransacao option:selected").val() + '&idcliente=' + $("#cliente  option:selected").val(), function () { });
            alert("Finalizando jquery");
        }
    </script>
}
}